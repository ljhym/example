import{a as t,b as i,i as s}from"./index-c7781f48.js";import{_ as e}from"./_plugin-vue_export-helper.1b428a4d.js";class o{constructor(t,i){this.specList=t,this.specCombinationList=i,this.quantity=0,this.vertex=[],this.adjoinArray=[],this.init()}init(){let t=[];this.specList.forEach((i=>{i.children.forEach((i=>{t.push(i.id.toString())}))})),this.vertex=t,this.quantity=t.length,this.initSpec(),this.initSameLevel();let i=JSON.parse(JSON.stringify(this.adjoinArray));this.adjoinArray=this.group(i,this.quantity)}initSpec(){this.adjoinArray=Array(this.quantity*this.quantity).fill(0),this.specCombinationList.forEach((t=>{t.specs.forEach((i=>{this.setAdjoinVertexs(i,t.specs)}))}))}setAdjoinVertexs(t,i){const s=this.vertex.indexOf(t);i.forEach((t=>{const i=this.vertex.indexOf(t);this.adjoinArray[s*this.quantity+i]=1}))}initSameLevel(){let t=this.getspecsOption();this.specList.forEach((i=>{const s=[];i.list.forEach((i=>{-1!=t.indexOf(i)&&s.push(i)})),i.list.forEach((i=>{-1!=t.indexOf(i)&&this.setAdjoinVertexs(i,s)}))}))}getspecsOption(){let t=[];return this.specCombinationList.forEach((i=>{i.specs.forEach((i=>{t.push(i)}))})),t}group(t,i){let s=0,e=[];for(;s<t.length;)e.push(t.slice(s,s+=i));return e}getSku(t){let i=[];if(t.some(Boolean))i=this.getUnions(t.filter(Boolean));else{let t=this.getspecsOption();i=this.vertex.filter((i=>-1!=t.indexOf(i)))}return i}getUnions(t){t=t.map((t=>this.adjoinArray[this.vertex.indexOf(t)]));const i=[];this.vertex.forEach(((s,e)=>{const o=t.map((t=>t[e])).reduce(((t,i)=>t+=i||0),0);i.push(o)}));let s=[];return i.forEach(((i,e)=>{i>=t.length&&this.vertex[e]&&s.push(this.vertex[e])})),console.log(s),s}}let r={};const n=e({data:()=>({goodsSkuList:[{sku_id:80,store_id:0,supplyer_id:0,goods_id:189,sku_model:2,sku:"4",sku_val:"18",sku_name:"S码",goods_sn:"21rwqf12",bar_code:"",goods_number:1010,goods_weight:"0.00",market_price:"888.00",shop_price:"3.00",group_price:"9.00",promote_price:"0.00",settle_price:"0.00",add_time:1663063801,update_time:1678420832,BuyMaxNum:1010,sale_price:"3.00",exp_price:["3","00"],image:null}],skuList:[{id:4,speid:0,val:"尺寸",children:[{id:5,speid:4,val:"M码"},{id:6,speid:4,val:"L码"},{id:18,speid:4,val:"S码"}]}]}),onLoad(){this.init()},methods:{init(){this.goodsSkuList=this.goodsSkuList.filter((t=>t.BuyMaxNum>0)),this.goodsSkuList.forEach((t=>{t.specs=t.sku_val.split(":")})),this.skuList.forEach((t=>{t.list=[],t.children.forEach((i=>{t.list.push(i.id.toString())}))})),r=new o(this.skuList,this.goodsSkuList),console.log(r),console.log(r.getSku(["18"]))}}},[["render",function(e,o,r,n,h,a){const c=s;return t(),i(c)}]]);export{n as default};

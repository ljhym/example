import{a as e,b as s,w as i,i as r,f as t,g as d,F as o,h as _,d as p,t as u,n as a,j as l}from"./index-c7781f48.js";import{_ as m}from"./_plugin-vue_export-helper.1b428a4d.js";const c=[{sku_id:87,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"5:27:30",sku_name:"M码,牛皮,30盒",goods_sn:"asdasd",bar_code:"",goods_number:99,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"10.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:99,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:89,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"5:61:29",sku_name:"M码,羊皮,10盒",goods_sn:"asda1231",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"12.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:91,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"5:61:31",sku_name:"M码,羊皮,90盒",goods_sn:"sdfgasdfg",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"14.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:93,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"6:27:30",sku_name:"L码,牛皮,30盒",goods_sn:"fdgssdfsgert",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"16.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:94,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"6:27:31",sku_name:"L码,牛皮,90盒",goods_sn:"adfgferge",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"17.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:96,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"6:61:30",sku_name:"L码,羊皮,30盒",goods_sn:"aedfgad",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"18.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:97,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"6:61:31",sku_name:"L码,羊皮,90盒",goods_sn:"fgadfgad",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"18.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:99,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"18:27:30",sku_name:"S码,牛皮,30盒",goods_sn:"afadfg",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"18.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:100,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"18:27:31",sku_name:"S码,牛皮,90盒",goods_sn:"afdagdfgagf",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"20.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:102,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"18:61:30",sku_name:"S码,羊皮,30盒",goods_sn:"adfg",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"20.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null},{sku_id:103,store_id:0,supplyer_id:0,goods_id:188,sku_model:2,sku:"4:26:28",sku_val:"18:61:31",sku_name:"S码,羊皮,90盒",goods_sn:"dfgfdg",bar_code:"",goods_number:100,goods_weight:"0.00",market_price:"77.00",shop_price:"8.00",group_price:"20.00",promote_price:"0.00",settle_price:"0.00",add_time:1678505850,update_time:1678505910,BuyMaxNum:100,sale_price:"8.00",exp_price:["8","00"],image:null}],g=[{id:4,speid:0,val:"尺寸",children:[{id:5,speid:4,val:"M码"},{id:6,speid:4,val:"L码"},{id:18,speid:4,val:"S码"}]},{id:26,speid:0,val:"材料",children:[{id:27,speid:26,val:"牛皮"},{id:61,speid:26,val:"羊皮"}]},{id:28,speid:0,val:"盒数",children:[{id:29,speid:28,val:"10盒"},{id:30,speid:28,val:"30盒"},{id:31,speid:28,val:"90盒"}]}];class h{constructor(e,s){this.primeLen=9999,this.skuList=e,this.goodsSkuList=s,this.sku=[],this.skuId=[],this.goodsPrime=[],this.primeList=[],this.init()}init(){this.skuList.forEach((e=>{this.sku.push(...e.children)})),this.primeList=this.getPrime(this.sku.length),this.skuId=this.sku.map((e=>e.id)),this.goodsSkuList.forEach((e=>{let s=e.sku_val.split(":").map((e=>this.primeList[this.skuId.indexOf(e-0)]));this.goodsPrime.push(s)})),this.goodsPrime=this.goodsPrime.map((e=>e.reduce(((e,s)=>e*s))))}getSku(e=[]){let s=[];return s=0==e.length?this.getAll():this.getCanSel(e),s}getCanSel(e){let s=this.skuToPrime(e),i=[];e.map(((s,r)=>{i[r]={selid:this.skuToPrime([s])-0,otherSelid:this.skuToPrime(e.filter((e=>e!=s))),sametypeid:this.skuToPrime(this.getSameTypeId(s))}}));let r=[];i.forEach(((e,s)=>{let i=e.sametypeid.filter((s=>{let i=1*s;e.otherSelid.length>0&&(i=s*e.otherSelid.reduce(((e,s)=>e*s)));let r=!1;return this.goodsPrime.forEach((e=>{e%i==0&&(r=!0)})),r}));r.push(...i)}));let t=this.getDiffSku(e),d=[...new Set([...s,...r,...t])];return this.primeToSku(d)}getSameTypeId(e){let s=[];return this.skuList.forEach(((i,r)=>{i.children.forEach((r=>{r.id==e&&(s=i.children)}))})),s=s.filter((s=>s.id!=e)).map((e=>e.id)),s}getDiffSku(e){let s=[];this.skuList.forEach(((i,r)=>{let t=!1;i.children.forEach(((s,i)=>{-1!=e.indexOf(s.id)&&(t=!0)})),t||s.push(i.children)}));let i=[];return s.map((e=>{e.map((e=>{i.push(e.id)}))})),e=this.skuToPrime(e),i=this.skuToPrime(i),i.filter((s=>{let i=s*e.reduce(((e,s)=>e*s)),r=!1;return this.goodsPrime.forEach((e=>{e%i==0&&(r=!0)})),r}))}getAll(){let e=[];return this.primeList.forEach(((s,i)=>{this.goodsPrime.forEach(((i,r)=>{i%s==0&&e.push(s)}))})),this.primeToSku([...new Set(e)])}skuToPrime(e=[]){return e.map(((e,s)=>this.primeList[this.skuId.indexOf(e)]))}primeToSku(e=[]){return e.map(((e,s)=>this.skuId[this.primeList.indexOf(e)]))}getPrime(e){let s=this.primeLen;var i=[];for(let t=2;t<=s&&i.length!=e;t++){var r=!0;for(let e=2;e<t;e++)if(!(t%e)){r=!r;break}r&&(i[i.length]=t)}return i}}let n={};const k=m({data:()=>({skuList:[],goodsSkuList:[],selArr:[],canArr:[]}),onLoad(){this.skuList=g,this.goodsSkuList=c,n=new h(g,c),console.log(n),this.setCanSel()},methods:{setCanSel(){this.canArr=n.getSku(this.selArr)},setSel(e,s){this.skuList[e].children.forEach(((e,i)=>{i!=s&&(e.select=!1)})),this.skuList[e].children[s].select=!this.skuList[e].children[s].select;let i=[];this.skuList.forEach((e=>{e.children.forEach((e=>{e.select&&i.push(e.id)}))})),this.selArr=i,this.setCanSel()}}},[["render",function(m,c,g,h,n,k){const f=r,x=l;return e(),s(f,null,{default:i((()=>[(e(!0),t(o,null,d(n.skuList,((r,l)=>(e(),s(f,{class:"box"},{default:i((()=>[_(f,{style:{"padding-bottom":"20rpx"}},{default:i((()=>[p(u(r.val)+": ",1)])),_:2},1024),(e(!0),t(o,null,d(r.children,((r,t)=>(e(),s(x,{onClick:e=>k.setSel(l,t),class:a(["tag",[-1==n.canArr.indexOf(r.id)?"disable":"",-1!=n.selArr.indexOf(r.id)?"active":""]])},{default:i((()=>[p(u(r.val),1)])),_:2},1032,["onClick","class"])))),256))])),_:2},1024)))),256))])),_:1})}],["__scopeId","data-v-40c026f8"]]);export{k as default};

(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"01b4c":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Background=void 0;var a=i(n("bee2")),o=i(n("d4ec")),u=i(n("262e")),r=i(n("2caf")),s=n("2f8b"),c=n("f342"),d=uni.getSystemInfoSync().windowWidth,l=uni.getSystemInfoSync().windowHeight,f=function(e){(0,u.default)(n,e);var t=(0,r.default)(n);function n(){(0,o.default)(this,n);var e=c.ResourceLoader.getInstance().getImage("background");return t.call(this,e,0,0,d,l,!0)}return(0,a.default)(n)}(s.Sprite);t.Background=f},"1f66":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[i("v-uni-canvas",{staticClass:"canvas",attrs:{"canvas-id":"canvas",id:"canvas"}}),e.start?e._e():i("v-uni-view",{staticClass:"yinyue",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.startgame.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"text"},[e._v("点击屏幕开始游戏")])],1),e.start?e._e():i("v-uni-image",{staticClass:"startbg",attrs:{src:n("c76e"),mode:"aspectFill"}})],1)},a=[]},"257e":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},n("d9e2"),n("d401")},"262e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,i.default)(e,t)},n("d9e2"),n("d401"),n("7a82");var i=function(e){return e&&e.__esModule?e:{default:e}}(n("b380"))},"2caf":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.default)();return function(){var n,a=(0,i.default)(e);if(t){var u=(0,i.default)(this).constructor;n=Reflect.construct(a,arguments,u)}else n=a.apply(this,arguments);return(0,o.default)(this,n)}},n("4ae1"),n("d3b7"),n("f8c9");var i=u(n("7e84")),a=u(n("d967")),o=u(n("99de"));function u(e){return e&&e.__esModule?e:{default:e}}},"2e11":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-35f6f794]{width:100vw;height:100vh}.content .canvas[data-v-35f6f794]{width:100%;height:100%}.content .yinyue[data-v-35f6f794]{position:absolute;right:0;bottom:0;height:100%;width:100%;left:0;font-size:%?48?%;margin:auto;z-index:10;color:#fff;background-color:rgba(0,0,0,.7);text-align:center;display:flex;align-items:center;justify-content:center}.content .yinyue .text[data-v-35f6f794]{animation:blink-data-v-35f6f794 1s linear infinite;\r\n  /* 其它浏览器兼容性前缀 */-webkit-animation:blink-data-v-35f6f794 1s linear infinite;-moz-animation:blink-data-v-35f6f794 1s linear infinite;-ms-animation:blink-data-v-35f6f794 1s linear infinite;-o-animation:blink-data-v-35f6f794 1s linear infinite}.startbg[data-v-35f6f794]{width:100vw;height:100vh;position:absolute;z-index:9;left:0;top:0}\r\n/* 定义keyframe动画，命名为blink */@keyframes blink-data-v-35f6f794{0%{opacity:1}100%{opacity:0}}\r\n/* 添加兼容性前缀 */@-webkit-keyframes blink-data-v-35f6f794{0%{opacity:1}100%{opacity:0}}@-moz-keyframes blink-data-v-35f6f794{0%{opacity:1}100%{opacity:0}}@-ms-keyframes blink-data-v-35f6f794{0%{opacity:1}100%{opacity:0}}@-o-keyframes blink-data-v-35f6f794{0%{opacity:1}100%{opacity:0}}\r\n/* 定义blink类*/',""]),e.exports=t},"2f8b":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Sprite=void 0;var a=i(n("d4ec")),o=i(n("bee2")),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];(0,a.default)(this,e),this.img=t,this.x=n,this.y=i,this.width=o,this.height=u,this.visible=r,this.isCollision=!0,this.windowWidth=uni.getSystemInfoSync().windowWidth,this.windowHeight=uni.getSystemInfoSync().windowHeight}return(0,o.default)(e,[{key:"draw",value:function(e){this.visible&&e.drawImage(this.img.path,0,0,this.img.width,this.img.height,this.x,this.y,this.width,this.height)}},{key:"addX",value:function(e){this.x+=e}},{key:"addY",value:function(e){this.y+=e}},{key:"moveTo",value:function(e,t){this.x=e,this.y=t}},{key:"destory",value:function(){this.img=null}},{key:"collisionDetection",value:function(e){if(!this.isCollision||!e.isCollision)return!1;var t=e.x,n=e.x+e.width,i=e.y,a=e.y+e.height;return this.x>=t&&this.x<=n&&this.y>=i&&this.y<=a||(this.x+this.width>=t&&this.x+this.width<=n&&this.y>=i&&this.y<=a||(this.x>=t&&this.x<=n&&this.y+this.height>=i&&this.y+this.height<=a||this.x+this.width>=t&&this.x+this.width<=n&&this.y+this.height>=i&&this.y+this.height<=a))}}]),e}();t.Sprite=u},"47f7":function(e,t,n){var i=n("2e11");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("3d2e03d6",i,!0,{sourceMap:!1,shadowMode:!1})},"4e97":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Sound=void 0;var a=i(n("d4ec")),o=i(n("bee2")),u=function(){function e(){(0,a.default)(this,e),this.bgmAudio=uni.createInnerAudioContext(),this.bgmAudio.src="/static/audio/bgm.mp3",this.bgmAudio.volume=1,this.boomAudio=uni.createInnerAudioContext(),this.boomAudio.src="/static/audio/boom.mp3",this.boomAudio.volume=1,this.bulletAudio=uni.createInnerAudioContext(),this.bulletAudio.src="/static/audio/bullet.mp3",this.bulletAudio.volume=.5}return(0,o.default)(e,[{key:"playBulletAudio",value:function(){this.bulletAudio.currentTime=0,this.bulletAudio.play()}},{key:"playBgmAudio",value:function(){this.bgmAudio.currentTime=0,this.bgmAudio.loop=!0,this.bgmAudio.play()}},{key:"playBoomAudio",value:function(){this.boomAudio.currentTime=0,this.boomAudio.play()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();t.Sound=u},"70dc":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var a,o=i(n("d4ec")),u=i(n("bee2")),r=i(n("262e")),s=i(n("2caf")),c=n("2f8b"),d=n("f342"),l=uni.getSystemInfoSync().windowWidth,f=uni.getSystemInfoSync().windowHeight,h=function(e){(0,r.default)(n,e);var t=(0,s.default)(n);function n(){var e;(0,o.default)(this,n);var i=d.ResourceLoader.getInstance().getImage("player"),u=(l-80)/2,r=f-200;return e=t.call(this,i,u,r,80,80,!0),a=document.getElementById("canvas"),e.touched=!1,e.addTouchListener(),e}return(0,u.default)(n,[{key:"addTouchListener",value:function(){var e=this;a.addEventListener("touchstart",(function(t){t.preventDefault();var n=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY;e.checkClickPlayer(n,i)&&(e.touched=!0,e.setPlayerPos(n,i))})),a.addEventListener("touchmove",(function(t){t.preventDefault();var n=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY;e.checkClickPlayer(n,i)&&(e.touched=!0,e.setPlayerPos(n,i))})),a.addEventListener("touchend",(function(t){t.preventDefault(),e.touched=!1}))}},{key:"checkClickPlayer",value:function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}},{key:"setPlayerPos",value:function(e,t){var n=e-this.width/2,i=t-this.height/2;n<0?n=0:n>l-this.width&&(n=l-this.width),i<0?i=0:i>f-this.height&&(i=f-this.height),this.x=n,this.y=i}}]),n}(c.Sprite);t.Player=h},"728e":function(e,t,n){"use strict";n.r(t);var i=n("cc53"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"7e84":function(e,t,n){"use strict";function i(e){return t.default=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,n("131a"),n("3410")},"7ff6":function(e,t,n){"use strict";n.r(t);var i=n("1f66"),a=n("728e");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("abae");var u=n("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"35f6f794",null,!1,i["a"],void 0);t["default"]=r.exports},9230:function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageBox=void 0;var a=i(n("d4ec")),o=i(n("bee2")),u=(n("2f8b"),n("f342")),r=uni.getSystemInfoSync().windowWidth,s=uni.getSystemInfoSync().windowHeight,c=(r-300)/2,d=(s-300)/2,l=(r-150)/2,f=d+180,h=function(){function e(){(0,a.default)(this,e),this.img=u.ResourceLoader.getInstance().getImage("Common"),this.plane_x=270,this.plane_y=126,this.plane_w=114,this.plane_h=84,this.button_x=160,this.button_y=5,this.button_w=41,this.button_h=26}return(0,o.default)(e,[{key:"show",value:function(e){var t=uni.getStorageSync("score")||0;return e.drawImage(this.img.path,this.plane_x,this.plane_y,this.plane_w,this.plane_h,c,d,300,240),e.fillText("游戏结束！",c+20,d+36),e.fillText("历史最高分：".concat(t),c+55,d+120),e.drawImage(this.img.path,this.button_x,this.button_y,this.button_w,this.button_h,l,f,150,40),e.setFontSize(22),e.fillText("重新开始",l+30,f+27),[l,f,150,40]}},{key:"saveScore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=uni.getStorageSync("score")||0;e>t&&uni.setStorageSync("score",e)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();t.MessageBox=h},"99de":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t&&("object"===(0,i.default)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.default)(e)},n("d9e2"),n("d401");var i=o(n("53ca")),a=o(n("257e"));function o(e){return e&&e.__esModule?e:{default:e}}},a4cf:function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Bullet=void 0;var a=i(n("bee2")),o=i(n("d4ec")),u=i(n("262e")),r=i(n("2caf")),s=n("2f8b"),c=n("f342"),d=(uni.getSystemInfoSync().windowWidth,uni.getSystemInfoSync().windowHeight,function(e){(0,u.default)(n,e);var t=(0,r.default)(n);function n(e,i){(0,o.default)(this,n);var a=c.ResourceLoader.getInstance().getImage("bullet");return t.call(this,a,e-7.5,i-30,15,30,!0)}return(0,a.default)(n)}(s.Sprite));t.Bullet=d},abae:function(e,t,n){"use strict";var i=n("47f7"),a=n.n(i);a.a},b380:function(e,t,n){"use strict";function i(e,n){return t.default=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,n)}n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,n("131a")},bc3e:function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Enemy=void 0;var a=i(n("d4ec")),o=i(n("bee2")),u=i(n("262e")),r=i(n("2caf")),s=n("2f8b"),c=n("f342"),d=uni.getSystemInfoSync().windowWidth,l=(uni.getSystemInfoSync().windowHeight,function(e){(0,u.default)(n,e);var t=(0,r.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,a.default)(this,n);var o=c.ResourceLoader.getInstance().getImage("enemy"+i),u=Math.floor(Math.random()*(d-60)),r=-80;return e=t.call(this,o,u,r,60,60,!0),e.frameIndex=1,e}return(0,o.default)(n,[{key:"playExplosion",value:function(){var e=this;this.frameIndex>=19?this.visible=!1:(this.img=c.ResourceLoader.getInstance().getImage("explosion"+this.frameIndex),this.frameIndex++,setTimeout((function(){e.playExplosion()}),100))}}]),n}(s.Sprite));t.Enemy=l},c76e:function(e,t,n){e.exports=n.p+"static/img/bg.6918dd5d.jpg"},cc53:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("f9f8"),a={data:function(){return{start:!1}},mounted:function(){},methods:{startgame:function(){new i.Main,this.start=!0}}};t.default=a},d967:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},n("d3b7"),n("f8c9"),n("4ae1")},f342:function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceLoader=void 0,n("b64b");for(var a=i(n("d4ec")),o=i(n("bee2")),u="/static/images/",r={background:"".concat(u,"bg.jpg"),enemy1:"".concat(u,"enemy1.png"),enemy2:"".concat(u,"enemy2.png"),enemy3:"".concat(u,"enemy3.png"),player:"".concat(u,"hero.png"),bullet:"".concat(u,"bullet1.png"),Common:"".concat(u,"Common.png")},s=1;s<=19;s++)r["explosion"+s]="".concat(u,"explosion").concat(s,".png");var c=function(){function e(){(0,a.default)(this,e),this.imageMap=r}return(0,o.default)(e,[{key:"getImage",value:function(e){return this.imageMap[e]}},{key:"onLoad",value:function(e){var t=this,n=0,i=function(i){var a=t.imageMap[i];uni.getImageInfo({src:a,complete:function(a){t.imageMap[i]={height:a.height,path:a.path,width:a.width},n++,n==Object.keys(t.imageMap).length&&e()}})};for(var a in this.imageMap)i(a)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();t.ResourceLoader=c},f9f8:function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0,n("14d9"),n("e25e"),n("a434"),n("d3b7");var a,o,u,r,s,c=i(n("d4ec")),d=i(n("bee2")),l=n("f342"),f=n("01b4c"),h=n("bc3e"),v=n("70dc"),y=n("a4cf"),g=n("4e97"),p=n("9230"),m=uni.getSystemInfoSync().windowWidth,b=uni.getSystemInfoSync().windowHeight,w=[],_=[],k=[],x=0,I=!1,S=[],M=function(){function e(){var t=this;(0,c.default)(this,e),a=uni.createCanvasContext("canvas"),l.ResourceLoader.getInstance().onLoad((function(){t.init()}))}return(0,d.default)(e,[{key:"init",value:function(){var e=this;w[0]=new f.Background,w[1]=new f.Background,w[1].y=-b,r=setInterval((function(){e.creatEnemy()}),1e3),s=setInterval((function(){e.shoot()}),200),o=new v.Player,g.Sound.getInstance().playBgmAudio(),this.run()}},{key:"creatEnemy",value:function(){_.push(new h.Enemy(parseInt(3*Math.random())+1))}},{key:"enemyMove",value:function(){for(var e=[],t=0;t<_.length;t++)_[t].draw(a),_[t].addY(4),_[t].y>b&&e.push(t),_[t].collisionDetection(o)&&(I=!0);for(var n=0,i=e;n<i.length;n++){var u=i[n];_[u].destory(),_.splice(u,1)}}},{key:"shoot",value:function(){g.Sound.getInstance().playBulletAudio(),k.push(new y.Bullet(o.x+o.width/2,o.y))}},{key:"bulletMove",value:function(){for(var e=[],t=0;t<k.length;t++){k[t].draw(a),k[t].addY(-10),k[t].y<0&&e.push(t);for(var n=0;n<_.length;n++)k[t].collisionDetection(_[n])&&(g.Sound.getInstance().playBoomAudio(),x++,k[t].visible=!1,k[t].isCollision=!1,_[n].isCollision=!1,_[n].playExplosion())}for(var i=0,o=e;i<o.length;i++){var u=o[i];k[u].destory(),k.splice(u,1)}}},{key:"backgroundRun",value:function(){for(var e=0;e<w.length;e++)w[e].draw(a),w[e].addY(2),w[e].y>=b&&(w[e].y=2-b)}},{key:"showScore",value:function(){a.fillStyle="#fff",a.setFontSize(24),a.fillText("分数：".concat(x),12,24)}},{key:"gameoverHander",value:function(e){_.forEach((function(e,t){_[t].destory(),_.splice(t,1)})),k.forEach((function(e,t){k[t].destory(),k.splice(t,1)})),console.log("gameoverHander");var t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,i=S[0],a=S[1],o=S[2],u=S[3];t>=i&&t<=i+o&&n>=a&&n<=a+u&&this.restart()}},{key:"restart",value:function(){var e=document.getElementById("canvas");e.removeEventListener("touchstart",this.handler),I=!1,x=0,this.init()}},{key:"run",value:function(){var e=this;a.clearRect(0,0,m,b),this.backgroundRun(),this.enemyMove(),o.draw(a),this.bulletMove(),this.showScore(),u=requestAnimationFrame((function(){if(I){cancelAnimationFrame(u),clearInterval(r),clearInterval(s),g.Sound.getInstance().bgmAudio.pause(),g.Sound.getInstance().bulletAudio.pause(),(new p.MessageBox).saveScore(x),S=(new p.MessageBox).show(a);var t=document.getElementById("canvas");e.handler=e.gameoverHander.bind(e),t.addEventListener("touchstart",e.handler),a.draw(!0)}else a.draw(!0),e.run()}))}}]),e}();t.Main=M}}]);
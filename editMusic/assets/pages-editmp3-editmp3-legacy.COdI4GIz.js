System.register(["./index-legacy-h2Od-Brq.js","./_plugin-vue_export-helper-legacy.DgAO6S8O.js"],(function(e,t){"use strict";var a,n,i,r,l,o,s,d,c,u,f,h,p,g,m,v,b,y,w,_,k,B,C;return{setters:[e=>{a=e.m,n=e.a,i=e.o,r=e.c,l=e.n,o=e.i,s=e.d,d=e.w,c=e.b,u=e.e,f=e.f,h=e.t,p=e.g,g=e.r,m=e.h,v=e.u,b=e.j,y=e.k,w=e.F,_=e.l,k=e.I,B=e.p},e=>{C=e._}],execute:function(){var t=document.createElement("style");function x(e,t){return"string"==typeof e?t:e}t.textContent='.trans-slide-enter[data-v-ef5cc2d5],.trans-slide-leave-to[data-v-ef5cc2d5]{opacity:0;transform:translate(-30px)}.trans-slide-leave-active[data-v-ef5cc2d5]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-slide-enter-active[data-v-ef5cc2d5]{transition:all .3s linear}.trans-slide-right-enter[data-v-ef5cc2d5],.trans-slide-right-leave-to[data-v-ef5cc2d5]{opacity:0;transform:translate(30px)}.trans-slide-right-leave-active[data-v-ef5cc2d5]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-slide-right-enter-active[data-v-ef5cc2d5]{transition:all .3s linear}.trans-slide-y-enter[data-v-ef5cc2d5],.trans-slide-y-leave-to[data-v-ef5cc2d5]{opacity:0;transform:translateY(-30px)}.trans-slide-y-leave-active[data-v-ef5cc2d5]{transition:all .1s cubic-bezier(1,.5,.8,1)}.trans-slide-y-enter-active[data-v-ef5cc2d5]{transition:all .1s linear}.trans-slide-y-300-enter[data-v-ef5cc2d5],.trans-slide-y-300-leave-to[data-v-ef5cc2d5]{opacity:0;transform:translateY(-30px)}.trans-slide-y-300-leave-active[data-v-ef5cc2d5]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-slide-y-300-enter-active[data-v-ef5cc2d5]{transition:all .3s linear}.trans-fade-enter[data-v-ef5cc2d5],.trans-fade-leave-to[data-v-ef5cc2d5]{opacity:0}.trans-fade-leave-active[data-v-ef5cc2d5]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-fade-enter-active[data-v-ef5cc2d5]{transition:all .3s linear}.trans-fade-fast-enter[data-v-ef5cc2d5],.trans-fade-fast-leave-to[data-v-ef5cc2d5]{opacity:0}.trans-fade-fast-leave-active[data-v-ef5cc2d5]{transition:all .1s cubic-bezier(1,.5,.8,1)}.trans-fade-fast-enter-active[data-v-ef5cc2d5]{transition:all .1s linear}.trans-bounce-enter[data-v-ef5cc2d5],.trans-bounce-leave-to[data-v-ef5cc2d5]{opacity:0;transform:scale(.5)}.trans-bounce-leave-active[data-v-ef5cc2d5]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-bounce-enter-active[data-v-ef5cc2d5]{transition:all .3s linear}.ani-pulse[data-v-ef5cc2d5]{animation:pulse-ef5cc2d5 1.5s ease-in-out infinite}@keyframes pulse-ef5cc2d5{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}uni-view[data-v-ef5cc2d5],uni-scroll-view[data-v-ef5cc2d5],uni-swiper-item[data-v-ef5cc2d5],.u-empty[data-v-ef5cc2d5],.u-empty__wrap[data-v-ef5cc2d5],.u-tabs[data-v-ef5cc2d5],.u-tabs__wrapper[data-v-ef5cc2d5],.u-tabs__wrapper__scroll-view-wrapper[data-v-ef5cc2d5],.u-tabs__wrapper__scroll-view[data-v-ef5cc2d5],.u-tabs__wrapper__nav[data-v-ef5cc2d5],.u-tabs__wrapper__nav__line[data-v-ef5cc2d5]{display:flex;flex-direction:column;flex-shrink:0;flex-grow:0;flex-basis:auto;align-items:stretch;align-content:flex-start}.slider-range[data-v-0c3be6d5]{position:relative;padding-top:1.25rem}.slider-range-inner[data-v-0c3be6d5]{position:relative;width:100%}.slider-range.disabled .slider-bar-inner[data-v-0c3be6d5]{opacity:.35}.slider-range.disabled .slider-handle-block[data-v-0c3be6d5]{cursor:not-allowed}.slider-bar[data-v-0c3be6d5]{position:absolute;top:50%;left:0;right:0;transform:translateY(-50%)}.slider-bar-bg[data-v-0c3be6d5]{position:absolute;width:100%;height:100%;border-radius:10000px;z-index:10}.slider-bar-inner[data-v-0c3be6d5]{position:absolute;width:100%;height:100%;border-radius:10000px;z-index:11}.slider-handle-block[data-v-0c3be6d5]{position:absolute;top:50%;transform:translate(-50%,-50%);border-radius:50%;box-shadow:0 0 3px 2px rgba(227,229,241,.5);z-index:12}.slider-handle-block.decoration[data-v-0c3be6d5]:before{position:absolute;content:"";width:.1875rem;height:.75rem;top:50%;left:29%;transform:translateY(-50%);background:#eeedf2;border-radius:.09375rem;z-index:13}.slider-handle-block.decoration[data-v-0c3be6d5]:after{position:absolute;content:"";width:.1875rem;height:.75rem;top:50%;right:29%;transform:translateY(-50%);background:#eeedf2;border-radius:.09375rem;z-index:13}.range-tip[data-v-0c3be6d5]{position:absolute;top:0;font-size:.75rem;color:#666;transform:translate(-50%,-100%)}.trans-slide-enter[data-v-076e9f07],.trans-slide-leave-to[data-v-076e9f07]{opacity:0;transform:translate(-30px)}.trans-slide-leave-active[data-v-076e9f07]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-slide-enter-active[data-v-076e9f07]{transition:all .3s linear}.trans-slide-right-enter[data-v-076e9f07],.trans-slide-right-leave-to[data-v-076e9f07]{opacity:0;transform:translate(30px)}.trans-slide-right-leave-active[data-v-076e9f07]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-slide-right-enter-active[data-v-076e9f07]{transition:all .3s linear}.trans-slide-y-enter[data-v-076e9f07],.trans-slide-y-leave-to[data-v-076e9f07]{opacity:0;transform:translateY(-30px)}.trans-slide-y-leave-active[data-v-076e9f07]{transition:all .1s cubic-bezier(1,.5,.8,1)}.trans-slide-y-enter-active[data-v-076e9f07]{transition:all .1s linear}.trans-slide-y-300-enter[data-v-076e9f07],.trans-slide-y-300-leave-to[data-v-076e9f07]{opacity:0;transform:translateY(-30px)}.trans-slide-y-300-leave-active[data-v-076e9f07]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-slide-y-300-enter-active[data-v-076e9f07]{transition:all .3s linear}.trans-fade-enter[data-v-076e9f07],.trans-fade-leave-to[data-v-076e9f07]{opacity:0}.trans-fade-leave-active[data-v-076e9f07]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-fade-enter-active[data-v-076e9f07]{transition:all .3s linear}.trans-fade-fast-enter[data-v-076e9f07],.trans-fade-fast-leave-to[data-v-076e9f07]{opacity:0}.trans-fade-fast-leave-active[data-v-076e9f07]{transition:all .1s cubic-bezier(1,.5,.8,1)}.trans-fade-fast-enter-active[data-v-076e9f07]{transition:all .1s linear}.trans-bounce-enter[data-v-076e9f07],.trans-bounce-leave-to[data-v-076e9f07]{opacity:0;transform:scale(.5)}.trans-bounce-leave-active[data-v-076e9f07]{transition:all .3s cubic-bezier(1,.5,.8,1)}.trans-bounce-enter-active[data-v-076e9f07]{transition:all .3s linear}.ani-pulse[data-v-076e9f07]{animation:pulse-076e9f07 1.5s ease-in-out infinite}@keyframes pulse-076e9f07{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.item[data-v-076e9f07]{width:100%;padding:.625rem}.demo-slider-range[data-v-076e9f07]{background-color:#fff;padding:3.125rem 1.25rem 0}.section-title[data-v-076e9f07]{padding:0 0 .625rem;color:#666}.slider-item[data-v-076e9f07]:not(:last-child){margin-bottom:3.125rem}\n',document.head.appendChild(t);const T=C({name:"u-gap",mixins:[a,n,{props:{bgColor:{type:String,default:()=>uni.$u.props.gap.bgColor},height:{type:[String,Number],default:()=>uni.$u.props.gap.height},marginTop:{type:[String,Number],default:()=>uni.$u.props.gap.marginTop},marginBottom:{type:[String,Number],default:()=>uni.$u.props.gap.marginBottom}}}],computed:{gapStyle(){const e={backgroundColor:this.bgColor,height:uni.$u.addUnit(this.height),marginTop:uni.$u.addUnit(this.marginTop),marginBottom:uni.$u.addUnit(this.marginBottom)};return uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}}},[["render",function(e,t,a,n,s,d){const c=o;return i(),r(c,{class:"u-gap",style:l([d.gapStyle])},null,8,["style"])}],["__scopeId","data-v-ef5cc2d5"]]),E=s({components:{},props:{value:{type:Array,default:function(){return[0,100]}},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},format:{type:Function,default:function(e){return e}},disabled:{type:Boolean,default:!1},height:{height:Number,default:50},barHeight:{type:Number,default:5},backgroundColor:{type:String,default:"#e9e9e9"},activeColor:{type:String,default:"#1aad19"},blockSize:{type:Number,default:20},blockColor:{type:String,default:"#fff"},tipVisible:{type:Boolean,default:!0},decorationVisible:{type:Boolean,default:!1}},data(){return{values:[this.min,this.max],startDragPos:0,startVal:0}},computed:{lowerHandlePosition(){return(this.values[0]-this.min)/(this.max-this.min)*100},higherHandlePosition(){return(this.values[1]-this.min)/(this.max-this.min)*100},lowerTipStyle(){return this.lowerHandlePosition<90?`left: ${this.lowerHandlePosition}%;`:`right: ${100-this.lowerHandlePosition}%;transform: translate(50%, -100%);`},higherTipStyle(){return this.higherHandlePosition<90?`left: ${this.higherHandlePosition}%;`:`right: ${100-this.higherHandlePosition}%;transform: translate(50%, -100%);`}},created:function(){},onLoad:function(e){},watch:{value:{immediate:!0,handler(e,t){!this._isValuesValid(e)||e[0]===this.values[0]&&e[1]===this.values[1]||this._updateValue(e)}}},methods:{_updateValue(e){if(this.step>=this.max-this.min)throw new RangeError("Invalid slider step or slider range");let t=[];Array.isArray(e)&&(t=[e[0],e[1]]),"number"!=typeof t[0]?t[0]=this.values[0]:t[0]=Math.round((t[0]-this.min)/this.step)*this.step+this.min,"number"!=typeof t[1]?t[1]=this.values[1]:t[1]=Math.round((t[1]-this.min)/this.step)*this.step+this.min,this.values[0]===t[0]&&this.values[1]===t[1]||(t[0]<this.min&&(t[0]=this.min),t[1]>this.max&&(t[1]=this.max),t[0]>=t[1]&&(t[0]===this.values[0]?t[1]=t[0]+this.step:t[0]=t[1]-this.step),this.values=t,this.$emit("change",this.values))},_onTouchStart:function(e){if(this.disabled)return;this.isDragging=!0;let t=e.target.dataset.tag,a=e.changedTouches?e.changedTouches[0]:e;this.startDragPos=a.pageX,this.startVal="lowerBlock"===t?this.values[0]:this.values[1]},_onBlockTouchMove:function(e){this.disabled||this._onDrag(e)},_onBlockTouchEnd:function(e){this.disabled||(this.isDragging=!1,this._onDrag(e))},_onDrag(e){this.isDragging&&uni.createSelectorQuery().in(this).select(".slider-range-inner").boundingClientRect((t=>{let a=t.width;const n=e.target.dataset.tag;let i=((e.changedTouches?e.changedTouches[0]:e).pageX-this.startDragPos)/a*(this.max-this.min),r=this.startVal+i;"lowerBlock"===n?this._updateValue([r,null]):this._updateValue([null,r])})).exec()},_isValuesValid:function(e){return Array.isArray(e)&&2==e.length}}}),V=C(E,[["render",function(e,t,a,n,s,g){const m=o;return i(),r(m,{class:u(["slider-range",{disabled:e.disabled}]),style:l({paddingLeft:e.blockSize/2+"px",paddingRight:e.blockSize/2+"px"})},{default:d((()=>[c(m,{class:"slider-range-inner",style:l({height:e.height+"px"})},{default:d((()=>[c(m,{class:"slider-bar",style:l({height:e.barHeight+"px"})},{default:d((()=>[c(m,{class:"slider-bar-bg",style:l({backgroundColor:e.backgroundColor})},null,8,["style"]),c(m,{class:"slider-bar-inner",style:l({width:(e.values[1]-e.values[0])/(e.max-e.min)*100+"%",left:e.lowerHandlePosition+"%",backgroundColor:e.activeColor})},null,8,["style"])])),_:1},8,["style"]),c(m,{class:u(["slider-handle-block",{decoration:e.decorationVisible}]),style:l({backgroundColor:e.blockColor,width:e.blockSize+"px",height:e.blockSize+"px",left:e.lowerHandlePosition+"%"}),onTouchstart:e._onTouchStart,onTouchmove:e._onBlockTouchMove,onTouchend:e._onBlockTouchEnd,"data-tag":"lowerBlock"},null,8,["class","style","onTouchstart","onTouchmove","onTouchend"]),c(m,{class:u(["slider-handle-block",{decoration:e.decorationVisible}]),style:l({backgroundColor:e.blockColor,width:e.blockSize+"px",height:e.blockSize+"px",left:e.higherHandlePosition+"%"}),onTouchstart:e._onTouchStart,onTouchmove:e._onBlockTouchMove,onTouchend:e._onBlockTouchEnd,"data-tag":"higherBlock"},null,8,["class","style","onTouchstart","onTouchmove","onTouchend"]),e.tipVisible?(i(),r(m,{key:0,class:"range-tip",style:l(e.lowerTipStyle)},{default:d((()=>[f(h(e.format(e.values[0])),1)])),_:1},8,["style"])):p("",!0),e.tipVisible?(i(),r(m,{key:1,class:"range-tip",style:l(e.higherTipStyle)},{default:d((()=>[f(h(e.format(e.values[1])),1)])),_:1},8,["style"])):p("",!0)])),_:1},8,["style"])])),_:1},8,["class","style"])}],["__scopeId","data-v-0c3be6d5"]]);e("default",C({__name:"editmp3",setup(e){const t=new AudioContext,a=g({barHeight:3,blockSize:26,backgroundColor:"#EEEEF6",offsetTime:10,list:[{src:"https://www.miniui.top/music/%E5%83%8F%E6%88%91%E8%BF%99%E6%A0%B7%E7%9A%84%E4%BA%BA(Live)-%E6%AF%9B%E4%B8%8D%E6%98%93-27485797.mp3",id:1,buffer:"",time:0,volume:1,croppingTime:0,rangeValue:[0,0],audioBuffer:"",newAudioBuffer:""},{src:"https://www.miniui.top/music/%E6%98%9F%E6%98%9F%E7%82%B9%E7%81%AF-%E9%83%91%E6%99%BA%E5%8C%96-158919.mp3",id:2,buffer:"",time:0,volume:.9,croppingTime:0,rangeValue:[0,0],audioBuffer:"",newAudioBuffer:""},{src:"https://www.miniui.top/music/%E5%B9%B3%E5%87%A1%E4%B9%8B%E8%B7%AF.mp3",id:3,buffer:"",time:0,volume:1,croppingTime:0,rangeValue:[0,0],newAudioBuffer:""},{src:"https://www.miniui.top/music/%E5%A4%9C%E6%9B%B2-%E5%91%A8%E6%9D%B0%E4%BC%A6-118980.mp3",id:4,buffer:"",time:0,volume:1,croppingTime:0,rangeValue:[0,0],newAudioBuffer:""}],progress:"0%",blob:"",filename:""});function n(e){return Number(e).toFixed(1)+"S"}function l(e,t){a.list[t].rangeValue=e,function(e){let t=a.list[e];a.list[e].croppingTime=t.rangeValue[1]-t.rangeValue[0]}(t)}async function s(e){let n=await async function(e,t){const a=await fetch(e);if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);console.log(a.headers);const n=a.headers.get("Content-Length");if(!n)throw new Error("Unable to determine file size");const i=parseInt(n,10);let r=0;const l=a.body.getReader(),o=new ReadableStream({start(e){!function a(){l.read().then((({done:n,value:l})=>{n?e.close():(r+=l.byteLength,t(r/i),e.enqueue(l),a())}))}()}});return new Response(o).arrayBuffer()}(e.src,(e=>{console.log(`Progress: ${Math.round(100*e)}%`),a.progress=Math.round(100*e)+"%"})).then((e=>e));console.log(n);let i=await(r=n,console.log(r),new Promise((e=>{t.decodeAudioData(r,(function(t){e(t)}))})));var r;console.log(i),a.list.forEach((t=>{t.id==e.id&&(t.buffer=n,t.audioBuffer=i,t.time=i.duration,t.rangeValue=[0,i.duration],t.croppingTime=i.duration-t.rangeValue[0])})),console.log(a.list)}async function u(){a.list.forEach((e=>{console.log(e),e.audioBuffer&&C(e.audioBuffer,e.rangeValue,e.volume)}))}function C(e,t=[0,0],a=1){const n=new AudioContext,i=n.createBufferSource(),r=n.createGain();console.log(Number(a)),r.gain.value=Number(a),i.connect(r),r.connect(n.destination),i.buffer=e,i.start(0,t[0]),i.stop(t[1]-t[0])}async function E(){a.list.forEach((e=>{e.audioBuffer&&(e.newAudioBuffer=function(e){let a=e.audioBuffer,n=a.numberOfChannels,i=a.sampleRate,r=e.rangeValue[0]*i,l=e.rangeValue[1]*i-r;console.log(l);let o=t.createBuffer(n,l,i),s=new Float32Array(l),d=0;for(let t=0;t<n;t++)a.copyFromChannel(s,t,r),o.copyToChannel(s,t,d);return o}(e))})),a.list.forEach((e=>{e.newAudioBuffer&&(e.newAudioBuffer=function(e){const t=e.volume;let a=null,n=e.newAudioBuffer;a=new AudioBuffer({length:n.length,numberOfChannels:n.numberOfChannels,sampleRate:n.sampleRate});for(let i=0;i<n.numberOfChannels;i+=1){const e=n.getChannelData(i),r=a.getChannelData(i);for(let a=0;a<e.length;a+=1)r[a]=e[a]*t}return a}(e))}));let e=a.list.map((e=>e.newAudioBuffer)).filter((e=>e));if(2===e.length){let n=await async function(e,a){if(2!==e.length)throw new Error("This function only supports merging two buffers.");let n=e[0],i=e[1],r=n.sampleRate,l=a*r,o=l+i.length,s=Math.max(n.numberOfChannels,i.numberOfChannels),d=t.createBuffer(s,o,r);for(let t=0;t<s;t++){const e=d.getChannelData(t),a=n.getChannelData(t);for(let i=n.getChannelData(t).length-1;i>=0;i--)e[i]+=a[i];d.getChannelData(t).set(e,0)}for(let t=0;t<s;t++){const e=d.getChannelData(t),a=i.getChannelData(t);for(let n=i.getChannelData(t).length-1;n>=0;n--)e[n+l]+=a[n];d.getChannelData(t).set(e,0)}return d}(e,a.offsetTime);if(console.log("Merged AudioBuffer:",n),n){C(n,[0,n.duration],1);const e=function(e,t){var a,n,i=e.numberOfChannels,r=t*i*2+44,l=new ArrayBuffer(r),o=new DataView(l),s=[],d=0,c=0;for(f(1179011410),f(r-8),f(1163280727),f(544501094),f(16),u(1),u(i),f(e.sampleRate),f(2*e.sampleRate*i),u(2*i),u(16),f(1635017060),f(r-c-4),a=0;a<e.numberOfChannels;a++)s.push(e.getChannelData(a));for(;c<r;){for(a=0;a<i;a++)n=0|(.5+(n=Math.max(-1,Math.min(1,s[a][d])))<0?32768*n:32767*n),o.setInt16(c,n,!0),c+=2;d++}return new Blob([l],{type:"audio/wav"});function u(e){o.setUint16(c,e,!0),c+=2}function f(e){o.setUint32(c,e,!0),c+=4}}(n,n.length);return a.blob=e,void(a.filename="merged.mp3")}}}function S(){const e=URL.createObjectURL(a.blob);let t=document.createElement("a");t.style.display="none",t.href=e,t.download=a.filename,document.body.appendChild(t),t.click(),URL.revokeObjectURL(e)}return(e,t)=>{const g=_,A=k,z=x(m("u-gap"),T),D=o,P=B,H=x(m("slider-range"),V);return i(),r(D,null,{default:d((()=>[c(g,{onClick:u},{default:d((()=>[f("试听播放")])),_:1}),c(g,{style:{color:"red"}},{default:d((()=>[f("加载进度："+h(v(a).progress),1)])),_:1}),f(" 偏移时间 "),c(A,{type:"number",modelValue:v(a).offsetTime,"onUpdate:modelValue":t[0]||(t[0]=e=>v(a).offsetTime=e),name:"",id:""},null,8,["modelValue"]),f(" 播放第一个音频后 "+h(v(a).offsetTime)+" 秒开始播放第二个音频 ",1),c(z,{height:"30"}),(i(!0),b(w,null,y(v(a).list,((e,t)=>(i(),r(D,{key:t,class:"item"},{default:d((()=>[c(D,{onClick:t=>s(e)},{default:d((()=>[f(h(e),1)])),_:2},1032,["onClick"]),f(" 音频总时长："+h(e.time)+"S ",1),c(D,null,{default:d((()=>[c(P,null,{default:d((()=>[f("裁剪时长："+h(e.rangeValue[1]-e.rangeValue[0])+"S",1)])),_:2},1024),c(D,{class:"slider-item"},{default:d((()=>[c(H,{value:e.rangeValue,min:0,max:e.time,step:.1,"bar-height":v(a).barHeight,"block-size":v(a).blockSize,"background-color":v(a).backgroundColor,format:n,onChange:e=>l(e,t)},null,8,["value","max","bar-height","block-size","background-color","onChange"])])),_:2},1024)])),_:2},1024),f(" 音量(0-1)："),c(A,{type:"number",style:{color:"red"},modelValue:e.volume,"onUpdate:modelValue":t=>e.volume=t},null,8,["modelValue","onUpdate:modelValue"]),c(g,{onClick:t=>function(e){C(e.audioBuffer,e.rangeValue,e.volume)}(e)},{default:d((()=>[f("试听当前裁剪")])),_:2},1032,["onClick"]),c(z,{height:"50"})])),_:2},1024)))),128)),c(g,{onClick:E},{default:d((()=>[f("保存")])),_:1}),v(a).blob?(i(),r(g,{key:0,onClick:S},{default:d((()=>[f("下载")])),_:1})):p("",!0)])),_:1})}}},[["__scopeId","data-v-076e9f07"]]))}}}));

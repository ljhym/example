import{q as $,s as ee,n as te,o as F,b as ne,h as G,w as j,c as oe,g as ae,T as k,t as re,v as se,a as ie,F as le}from"./vendor.d2fb6949.js";import"./request.7b4fbf82.js";import{L as ce}from"./Loading.79f752f4.js";import{_ as de,r as me}from"./index.ef2301ac.js";import{S as pe,P as ue,aB as fe,t as f,ay as E,a4 as g,a1 as A,aC as ge,T as he,p as W,aD as we,aq as xe,s as ve,l as Me,av as ye,aA as be,B as _e,a as D,b as Pe,c as Ce,d as Ee,g as Be,C as Ie}from"./three.module.99621659.js";import{O as Le}from"./orbitcontrols.af7a7f0c.js";import"./dat.gui.module.6914edc7.js";import"./rgbeloader.41105168.js";import{F as Se,T as ze}from"./TextGeometry.5a5d5010.js";const Te={__name:"threehome",setup(Fe){const y=$(),p=ee({Isload:!1,Progress:0}),l=new pe,d=new ue(75,window.innerWidth/window.innerHeight,.1,1e3);let H="My Blog";d.position.set(0,10,10),setTimeout(()=>{},1200),l.add(d);let u={};u.onLoad=function(e){},u.onProgress=function(e,t,a){p.Progress=(t/a*100).toFixed(2)-0,(t/a*100).toFixed(2)=="100.00"&&(p.Isload=!0)},u.onError=function(e){p.Isload=!0};const R=new ye(u.onLoad,u.onProgress,u.onError),B=new fe(R).load(["./images/environmentMaps/1/px.jpg","./images/environmentMaps/1/nx.jpg","./images/environmentMaps/1/py.jpg","./images/environmentMaps/1/ny.jpg","./images/environmentMaps/1/pz.jpg","./images/environmentMaps/1/nz.jpg"]),V=new f({color:16777215,transparent:!0,opacity:.2,depthWrite:!1}),q=new E(70,70,200,200),h=new g(q,V);h.position.set(0,0,0),h.rotation.x=-Math.PI/2,l.add(h),[1,2,3,4].forEach(e=>{const t=new f({color:16777215,transparent:!0,opacity:.5,depthWrite:!1});t.side=A;const a=new E(70,2,200,200),n=new g(a,t);e==1?n.position.set(0,1,-35):e==2?(n.position.set(-35,1,0),n.rotation.y=Math.PI/2):e==3?(n.position.set(0,1,35),n.rotation.y=-Math.PI):e==4&&(n.position.set(35,1,0),n.rotation.y=-Math.PI/2),l.add(n)});var w=new ge(70,20,16777215,16777215);w.material.opacity=.5,w.material.transparent=!0,w.position.y=.005,l.add(w);function N(){var e=new Se;e.load("./fonts/Poppins_Regular.json",function(t){var a,n,r=16776192,s=[new f({color:r}),new be({color:r})],c=new ze(H,{font:t,size:3,height:.5,curveSegments:12,bevelEnabled:!0,bevelThickness:.1,bevelSize:.11,bevelOffset:0,bevelSegments:1});c.computeBoundingBox(),c.computeVertexNormals(),a=-.5*(c.boundingBox.max.x-c.boundingBox.min.x),c.translate(a,0,0),n=new g(c,s),n.position.z=-10,n.position.y=8,n.receiveShadow=!0,n.castShadow=!0,l.add(n)})}N();const o={count:2e4,size:.3,radius:60,branch:10,color:"#ff6030",endColor:"#1b3984",rotateScale:.3},I=new he,O=I.load("./images/particles/1.png");var x=null,L=null,b=null;const X=new W(o.color),Y=new W(o.endcolor);(()=>{x=new _e;const e=new Float32Array(o.count*3),t=new Float32Array(o.count*3);for(let a=0;a<o.count;a++){const n=a%o.branch*(2*Math.PI/o.branch),r=Math.random()*o.radius*Math.pow(Math.random(),3),s=a*3,c=Math.pow(Math.random()*2-1,3)*(o.radius-r)/o.radius,P=Math.pow(Math.random()*2-1,3)*(o.radius-r)/o.radius,C=Math.pow(Math.random()*2-1,3)*(o.radius-r)/o.radius;e[s]=Math.cos(n+r*o.rotateScale)*r+c,e[s+1]=0+P-10,e[s+2]=Math.sin(n+r*o.rotateScale)*r+C;const i=X.clone();i.lerp(Y,r/o.radius),t[s]=i.r,t[s+1]=i.g,t[s+2]=i.b}x.setAttribute("position",new D(e,3)),x.setAttribute("color",new D(t,3)),L=new Pe({size:o.size,sizeAttenuation:!0,depthWrite:!1,blending:Ce,map:O,vertexColors:!0,transparent:!0}),b=new Ee(x,L),l.add(b)})();const Z=new we(1,20,20),J=new f({metalness:.1,roughness:.1,envMap:B}),K=new g(Z,J);K.position.y=1,l.background=B;let v=[];function M(e,t,a,n,r,s){const c=new E(13.6,4),P=I.load(n),C=new f({map:P,side:A}),i=new g(c,C);return s&&(i.url=s,console.log(s)),i.position.set(e,t,a),i.rotation.x=r.rx,i.rotation.y=r.ry,v.push(i),l.add(i),i}M(-20,2,0,"./images/home/3D\u7ACB\u65B9\u4F531.png",{rx:0,ry:Math.PI/2},"lifang"),M(0,2,-20,"./images/home/\u6F2B\u5929\u98DE\u821E\u96EA\u82B11.png",{rx:0,ry:0},"xuehua"),M(20,2,0,"./images/home/\u5207\u5C4F\u6EDA\u52A81.png",{rx:0,ry:-Math.PI/2},"scrollpage"),M(0,2,20,"./images/home/games2.png",{rx:0,ry:Math.PI},"playgame"),console.log(v);const S=new xe,_=new Be;v.push(h);const z=new ve(16777215,1);z.position.set(-30,100,20),l.add(z);const m=new Me;m.setSize(window.innerWidth,window.innerHeight),te(()=>{y.value.appendChild(m.domElement),y.value.addEventListener("click",e=>{_.x=e.clientX/window.innerWidth*2-1,_.y=-(e.clientY/window.innerHeight*2-1),S.setFromCamera(_,d);let t=S.intersectObjects(v);if(console.log(t),t[0]&&t[0].object.url){console.log(t[0].object.url),me.push({name:t[0].object.url});return}t[0]&&t[0].point.x})}),m.render(l,d);const Q=new Le(d,m.domElement);Q.enableDamping=!0;const U=new Ie;window.addEventListener("dblclick",()=>{document.fullscreenElement?document.exitFullscreen():m.domElement.requestFullscreen()});function T(){let e=U.getElapsedTime();b.rotation.y=e*.3,m.render(l,d),requestAnimationFrame(T)}return T(),window.addEventListener("resize",()=>{console.log("resize"),d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight),m.setPixelRatio(window.devicePixelRatio)}),(e,t)=>(F(),ne(le,null,[G(k,{name:"fade"},{default:j(()=>[p.Isload?ae("",!0):(F(),oe(ce,{key:0,text:"3D\u6A21\u578B\u52A0\u8F7D\u4E2D...",Progress:p.Progress},null,8,["Progress"]))]),_:1}),G(k,{name:"fade"},{default:j(()=>[re(ie("div",{id:"homedom",ref_key:"canvasdom",ref:y},null,512),[[se,p.Isload]])]),_:1})],64))}};var Oe=de(Te,[["__scopeId","data-v-4561a7cd"]]);export{Oe as default};

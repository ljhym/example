import{C as n,S as s,j as r,P as h,l as o,aG as a,A as d}from"./three.module.99621659.js";import{R as c}from"./rgbeloader.41105168.js";import{O as l}from"./orbitcontrols.af7a7f0c.js";import{G as m}from"./GLTFLoader.195d9604.js";class b{constructor(e,t){this.container=document.querySelector(e),this.camera,this.scene,this.renderer,this.panzi,this.model,this.mixer,this.onFinish=t,this.clock=new n,this.init(),this.progressFn}init(){this.initSence(),this.initCamera(),this.initRender(),this.initControls(),this.render(),this.addMesh(),this.setLight(),window.addEventListener("resize",this.onWindowResize.bind(this))}initSence(){this.scene=new s,this.setEnvMap("000")}setEnvMap(e){new c().setPath("./files/hdr/").load(e+".hdr",t=>{t.mapping=r,this.scene.background=t,this.scene.environment=t})}initCamera(){this.camera=new h(45,window.innerWidth/window.innerHeight,.2,200),this.camera.position.set(-1.8,1.6,2.7)}initRender(){this.renderer=new o({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.toneMapping=a,this.renderer.toneMappingExposure=2,this.container.appendChild(this.renderer.domElement),this.renderer.setClearColor("#ffffff",1)}initControls(){this.controls=new l(this.camera,this.renderer.domElement),this.controls.enableDamping=!0}render(){requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera)}setLight(){const e=new d(16777215,.5);this.scene.add(e)}setModel(e){return new Promise((t,w)=>{new m().setPath("files/gltf/").load(e,i=>{this.model&&this.model.removeFromParent(),this.model=i.scene.children[0],this.scene.add(this.model),e=="bag2.glb"&&!this.panzi&&(this.scene.add(i.scene),this.spotlight1=i.scene.children[2].children[0],this.spotlight1.intensity=1,this.spotlight2=i.scene.children[3].children[0],this.spotlight2.intensity=1,this.spotlight3=i.scene.children[1].children[0],this.spotlight3.intensity=1),t(i)},i=>{this.progressFn&&this.progressFn(i)})})}onProgress(e){this.progressFn=e}async addMesh(){let e=await this.setModel("shoes.glb");this.onFinish&&this.onFinish(e)}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}export{b as B};

var S=Object.defineProperty,N=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var I=(o,s,e)=>s in o?S(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,P=(o,s)=>{for(var e in s||(s={}))M.call(s,e)&&I(o,e,s[e]);if(k)for(var e of k(s))V.call(s,e)&&I(o,e,s[e]);return o},B=(o,s)=>N(o,E(s));import{B as $}from"./index.618e76e4.js";import{Z as O,u as R,s as z,q as D,n as j,o as n,b as i,c as q,g as C,a as t,B as u,f as _,h as m,F as h,A as f,z as x,p as A,d as H,y as v,w as b,_ as T}from"./vendor.d2fb6949.js";import{L as Y}from"./Loading.79f752f4.js";import{g as Z}from"./index.8e92a03d.js";import{B as G}from"./Base3d.44ab2b25.js";import{_ as J}from"./index.ef2301ac.js";import{S as K,R as Q,a as U}from"./SketchOutlined.8fd85801.js";import"./request.7b4fbf82.js";import"./three.module.99621659.js";import"./rgbeloader.41105168.js";import"./orbitcontrols.af7a7f0c.js";import"./GLTFLoader.195d9604.js";const W=o=>(A("data-v-5da2c487"),o=o(),H(),o),X={class:"product"},ee=x("\u4EA7\u54C1\u63A8\u8350 "),se={class:"products"},te=["onClick"],oe={class:"prod-title"},ce={class:"img"},re=["src"],ae=x(" \u52A0\u5165\u8D2D\u7269\u8F66 "),de=W(()=>t("div",{class:"fix"},"\u9F20\u6807\u4E0A\u4E0B\u6EDA\u52A8",-1)),ne={class:"title"},ie={class:"content"},le=x("\u5207\u6362\u4F7F\u7528\u573A\u666F "),ue={class:"scenes"},_e=["onClick"],pe=["src"],me={__name:"Product",setup(o){const s=O();R();const e=z({products:[],screen:[],pIndex:1,sceneIndex:0,base3d:{},descIndex:0,isLoading:!0,Progress:0});function g(){e.isLoading=!1}let y=D();async function L(a,c){e.pIndex=c,e.isLoading=!0,e.Progress=0;let l=await e.base3d.setModel(a.modelName);console.log(l),g()}function w(a,c){e.sceneIndex=c,e.base3d.setEnvMap(a)}function F(a){let c=B(P({},a),{num:1}),l=0;s.state.buycarts.some((d,p)=>c.id==d.id?(l=p,!0):!1)?s.commit("addBuycartsNum",l):s.commit("addBuycarts",c)}return j(async()=>{let a=await Z();console.log(a),e.products=a.list,e.screen=a.hdr,y.value.addEventListener("mousewheel",c=>{c.deltaY>0?s.commit("setFullscreen",!0):s.commit("setFullscreen",!1)}),e.base3d=new G("#product",g),e.base3d.onProgress(c=>{e.Progress=((c.loaded/c.total-0)*100).toFixed(2),console.log(e.Progress),e.Progress=="100.00"&&g()})}),(a,c)=>{const l=$;return n(),i(h,null,[e.isLoading?(n(),q(Y,{key:0,text:"3D\u6A21\u578B\u52A0\u8F7D\u8F83\u6162",Progress:e.Progress},null,8,["Progress"])):C("",!0),t("div",X,[t("div",{class:u(["prod-list",{hidden:_(s).state.isFullscreen}])},[t("h1",null,[m(_(K)),ee]),t("div",se,[(n(!0),i(h,null,f(e.products,(r,d)=>(n(),i("div",{class:u(["prod-item",{active:d==e.pIndex}]),onClick:p=>L(r,d)},[t("div",oe,v(r.title),1),t("div",ce,[t("img",{src:r.imgsrc,alt:""},null,8,re)]),m(l,{block:"",type:"primary",onClick:T(p=>F(r),["stop"])},{icon:b(()=>[m(_(U))]),default:b(()=>[ae]),_:2},1032,["onClick"])],10,te))),256))])],2),t("div",{ref_key:"product",ref:y,id:"product"},[de,e.products[e.descIndex]?(n(!0),i(h,{key:0},f(e.products[e.descIndex].desc,(r,d)=>(n(),i("div",{class:u(["desc-list",{active:e.descIndex==d}])},[t("h1",ne,v(r.title),1),t("p",ie,v(r.content),1)],2))),256)):C("",!0)],512),t("div",{class:u(["scene-list",{hidden:_(s).state.isFullscreen}])},[t("h3",null,[m(_(Q)),le]),t("div",ue,[(n(!0),i(h,null,f(e.screen,(r,d)=>(n(),i("div",{class:u(["scene-item",{active:d==e.sceneIndex}]),onClick:p=>w(r,d)},[t("img",{src:`./files/hdr/${r}.jpg`,alt:""},null,8,pe)],10,_e))),256))])],2)])],64)}}};var we=J(me,[["__scopeId","data-v-5da2c487"]]);export{we as default};

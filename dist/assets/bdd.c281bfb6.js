import{q as u,s as f,n as v,o as l,b as P,c as b,g as L,t as h,v as _,h as k,w as x,a as M,T as E,F as C}from"./vendor.d2fb6949.js";import{P as T,S as W,T as y,j as R,k as S,l as z}from"./three.module.99621659.js";import{O as B}from"./orbitcontrols.af7a7f0c.js";import{G as D}from"./GLTFLoader.195d9604.js";import{L as F}from"./Loading.79f752f4.js";import"./index.ef2301ac.js";const A={__name:"bdd",setup(H){const c=u();let o,r,n;const a=f({Progress:0,isLoading:!0});v(()=>{w(),s()});function w(){const d=document.createElement("div");c.value.appendChild(d),o=new T(45,window.innerWidth/window.innerHeight,.25,20),o.position.set(0,1,3),r=new W,new y().load("./bdd/env.jpg",function(m){new D().setPath("./bdd/").load("dwendwen.gltf",function(t){t.scene.traverse(function(e){if(r.background=m,r.environment=m,e.name=="outer"||e.name=="mask")e.material.envMap=m,e.material.envMap.mapping=R,e.material.envMapIntensity=2;else if(e.name=="body"){var g=e.material.map;e.material=new S({map:g})}}),r.add(t.scene),s(),a.isLoading=!1},t=>{typeof t.loaded=="number"&&t.loaded!=0&&(a.Progress=((t.loaded/t.total-0)*100).toFixed(2),console.log(a.Progress),a.Progress=="100.00")})}),n=new z({antialias:!0}),n.setPixelRatio(window.devicePixelRatio),n.setSize(window.innerWidth,window.innerHeight),d.appendChild(n.domElement);const i=new B(o,n.domElement);i.addEventListener("change",s),i.minDistance=2,i.maxDistance=10,i.target.set(0,.5,-.2),i.update(),window.addEventListener("resize",p)}function p(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight),s()}function s(){n.render(r,o)}return(d,i)=>(l(),P(C,null,[a.isLoading?(l(),b(F,{key:0,text:"3D\u6A21\u578B\u52A0\u8F7D\u8F83\u6162",Progress:a.Progress},null,8,["Progress"])):L("",!0),h(k(E,{name:"fade"},{default:x(()=>[M("div",{id:"bdd",ref_key:"bdddom",ref:c},null,512)]),_:1},512),[[_,!a.isLoading]])],64))}};export{A as default};
